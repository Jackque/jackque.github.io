<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Jacky Han</title>

	<link rel="icon" href="../favicon.ico" type="image/x-icon"/>
	<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon"/>

    <!-- Bootstrap Core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../css/stylish-portfolio.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

     <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#top">Jacky Han</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="#top"></a>
                    </li>
                    <li class="page-scroll">
                        <a href="#about">About</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#projects">My Projects</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#bottom">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <!-- About -->
    <section id="about" class="about">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
					<h1 style="font-size:64px">CS488 Project: Battlestation</h1>
                    <hr/>
                    <p>
                        For my CS488 project, I decided to improve on my ray tracer from assignment 4, starting
                        with the easy objectives, then implementing an approximation of global illumination through
                        path tracing, then hopefully easily porting over the features to my path tracing implementation.
                    </p>

                    <hr />

                    <h2>Basic Cornell Box</h2>
                    <div>
                        To start off, I made a basic cornell box as a test scene.
                    </div>
                    <br/>
                    <img src="../img/ray-00-base.png" width="512">

                    <hr/>

                    <h2>Texture Mapping</h2>
                    <div>
                        Introduce uv coordinates to meshes and using math to calculate
                        uv's for primitives.
                    </div>
                    <br/>
                    <img src="../img/ray-01-texture.png" width="512">

                    <hr/>

                    <h2> Bump/Normal Mapping</h2>
                    <div>
                        Same as texture mapping but also calculate tangents and bitangents with bitangents
                        going in the positive u direction and bitangents going in the positive v direction.
                    </div>
                    <br/>
                    <img src="../img/ray-02-bump.gif" width="512">

                    <hr />

                    <h2>Reflection</h2>
                    <div>
                        Bounce rays off of "reflective" surfaces that are defined by the material reflected
                        by the angle of incidence to the normal.
                    </div>
                    <br/>
                    <img src="../img/ray-03-reflection.png" width="512">

                    <hr />

                    <h2>Refraction</h2>
                    <div>
                        Use Snell's law to bend rays of light proportional to refractive indexes, and
                        in the cases where the angle of incidence is greater than the critical angle between the
                        two mediums, there is total internal reflection.
                    </div>
                    <br/>
                    <img src="../img/ray-04-refraction.png" width="512">

                    <hr />

                    <h2>Adaptive Anti-Aliasing</h2>
                    <div>
                        Utilize edge detection Sobel-Feldman edge detection algorithm, then perform
                        supersampling on pixels where there is an edge beyond a certain threshold
                    </div>
                    <br/>
                    <img src="../img/ray-05-aa-before.png" width="512">
                    <img src="../img/ray-05-aa-edges.png" width="512">
                    <br /><br/>
                    <img src="../img/ray-05-aa-edges-detected.png" width="512">
                    <img src="../img/ray-05-aa-after.png" width="512">

                    <hr />

                    <h2>Depth of Field</h2>
                    <div>
                        Implement "blur" by introducing an aperture to the render settings to mimic a camera with
                        a lens rather than a pinhole camera. Instead of using the "eye" all the time, use many points
                        sampled on the aperture modelled as a unit disk, then send a ray out from that sampled
                        point to the lookat, the focal point, and average the results.
                        This means that all objects not lying near the focal plane
                        will appear blurred since the rays don't converge at different points.
                    </div>
                    <br/>
                    <img src="../img/ray-06-dof.png" width="512">
                    <img src="../img/ray-06-dof2.png" width="512">

                    <hr />

                    <h2>Soft Shadows</h2>
                    <div>
                        Implement area light sources to represent how lights work in real life, then instead of
                        using one shadow ray per point light instead sample many points on the spherical light's
                        surface then average out the contributions of the shadow rays created from those points.
                    </div>
                    <br/>
                    <img src="../img/ray-07-ss.png" width="512">

                    <hr />

                    <h2>Animation</h2>
                    <div>
                        Animate objects within the scene file by introducing keyframes through
                        matrix transforms, i.e. keyframe n+1 is after transform x. Interpolation
                        is done linearly and with Bezier curves to get the ease-in ease-out effect.
                    </div>
                    <br/>
                    <img src="../img/ray-08-animation.gif" width="512">

                    <hr />
                    <h1> Path Tracing </h1>
                    <p>
                        Path tracing was implemented to better approximate global illumination, creating
                        effects like soft shadows, color bleeding, and caustics for "free," giving scenes
                        less of a flat appearance from lighting. This is accomplished by bouncing rays off of surfaces
                        at each surface interaction in accordance with a Bireflectional distribution function depending
                        on the material of the object, which averaged over many samples performs Monte Carlo integration
                        over all possible outcomes and will theoretically converge to Kajiya's "rendering equation."
                    </p>
                    <p>
                        Along with path tracing, I implemented a simple microfacet BRDF for specular light interactions
                        using a variation of the Cook-Torrance model. I also used a sampler that
                        is more uniform than a random sampler to reach convergence faster. All of the above
                        features were also ported to the new path tracer, with some being more difficult than
                        others.
                    </p>
                    <p>
                        Some things I also included to improve on the path tracer were Russian Roulette termination,
                        using direct + indirect lighting, and using importance sampling to reduce noise.
                    </p>

                    <hr />

                    <h2> Base Cornell Box </h2>
                    <div>
                        The new cornell box. Notice the color bleeding effects on the sides of the floor,
                        back wall, ceiling, and the "egg" sphere.
                    </div>
                    <br/>
                    <img src="../img/path-00-base.png" width="512">

                    <hr />

                    <h2> Texture Mapping & Depth of Field </h2>
                    <div>
                        Texture mapping requires no changes. Depth of field required many samples to reach
                        convergence in the path tracing portion for each aperture sample.
                    </div>
                    <br/>
                    <img src="../img/path-01-texture.png" width="512">

                    <hr />

                    <h2> Bump Mapping </h2>
                    <br/>
                    <img src="../img/path-02-bump.gif" width="512">

                    <hr />

                    <h2> Reflection & Refraction </h2>
                    <div>
                        Reflection requires no changes. Refraction now has (weak) caustics from
                        the light rays going through the refractive medium
                    </div>
                    <br/>
                    <img src="../img/path-03-refr.png" width="512">

                    <hr />

                    <h2> Animation </h2>
                    <br/>
                    <img src="../img/path-04-animation.gif" width="512">

                    <hr />

                    <h2> Final Scene </h2>
                    <div>
                        I contructed this scene based off of my own desk during graphics
                        assignments :)
                    </div>
                    <div>
                        Rendered at 1024x512, 512 samples per pixel, with AAA to remove jaggies.
                    </div>
                    <br/>
                    <img id="final" src="../img/path-final-aa.png" width="1024">
                    <br />
                    <br/>
                    <img id="change1" src="../img/path-final-aa.png" width="128">
                    <img id="change2" src="../img/path-final-1.png" width="128">
                    <img id="change3" src="../img/ray-final-1.png" width="128">
                    <br/>
                    <div class="container" style="width: 440px">
                        <div class="col-lg-4">
                    With AA
                        </div>
                        <div class="col-lg-4">
                    Without AA
                        </div>
                        <div class="col-lg-4">
                     Original RT
                        </div>
                    </div>
                    <hr />

                    <h1> Bonus Objectives </h1>
                    <p>
                        I implemented a few bonus objectives to speed up rendering times and
                        to overall improve the asthetic of the renders.
                    </p>

                    <hr />

                    <h2> Multithreading </h2>
                    <p>
                        I implemented multithreading since ray tracing is a highly parallelizable task, using C++11 threads.
                    </p>
                    <p>
                        Here is a graph of log2(threads) vs performance for rendering macho cows
                        at high resolution on a 4 core Macbook Pro:
                    </p>
                    <img src="../img/misc-multithread.png" width="512">

                    <hr />

                    <h2> Spatial Partitioning with kd-trees </h2>
                    <div>
                        Each mesh's triangles are split during a preprocessing step using kd-trees,
                        where at each step the polygons are split on the midpoint of all the polygons
                        in the mesh with a plane determined by a simple heuristic, continuing until
                        maximum depth has exceeded or there are too few polygons in one leaf.
                        When performing intersection, instead of checking through every polygon of the mesh, we can now
                        instead check for the kd-tree node's left and right bounding boxes,
                        iterating through both only if the ray intersects both the boxes, which can potentially
                        reduce mesh intersect from an O(n) operation to an O(logn) operation.
                        Once at the leaf of the kd tree, perform normal triangle intersect on the small
                        number of triangles bounded by that leaf's bounding box.
                    </div>
                    <br/>
                    <div>
                        Here is a the performance of rendering an IcoSphere from blender with varying
                        amounts of subdivision:
                    </div>
                    <br/>
                    <img src="../img/misc-kd.png" width="512">
                    <img src="../img/misc-kd-scene.png" width="256">

                    <hr />

                    <h2> Phong Shading </h2>
                    <div>
                        Phong shading creates smooth surfaces from lighting instead of flat ones. This is done
                        through normal interpolation, given a normal for each vertex of a triangle during intersection.
                        This also requires meshes that have vertex normals as opposed to face normals, something that is
                        easily accomplished in Blender.
                    </div>
                    <br/>
                    <img src="../img/misc-flat.png" width="512">
                    <img src="../img/misc-smooth.png" width="512">

                    <hr />

                    <h2> Microfacet BRDF & Glossy Reflection </h2>
                    <div>
                        I  implemented a specular microfacet BRDF through a variation of Cook-Torrance, which aims to
                        model materials as if they had little microfacets or imperfections at the microscopic level.
                        The equation looks like this:
                    </div>
                    <img src="../img/misc-ct.png" width="200">
                    <div>
                        The F term represents how metallic the object is, as in, how it reflects light between different angles.
                        The D term represents the normal distribution of the microfacets, where the more microfacets
                        there were the more probability light is scattered. The G term represents the masking/shadowing of
                        microfacets, where a higher value means more faces are blocked by each other.
                        The F term is Schlick's approximation of the Fresnel equation, the D and G terms are from Trowbridge-Reitz,
                        referred commonly as GGX.
                    </div>
                    <br/>
                    <img src="../img/misc-mats.png" width="512">
                    <br/>
                    <br/>
                    <div>
                        With the BRDF, it becomes easy to tune a few parameters like roughness to create a glossy reflection effect.
                    </div>
                    <br/>
                    <img src="../img/misc-glossy.png" width="512">

                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>


    <!-- Footer -->
    <footer>
        <div id="bottom" class="container">
            <div class="row">
                <div class="col-lg-10 col-lg-offset-1 text-center">
                    <h4><strong>Jacky Han</strong>
                    </h4>
                    <p>Student at University of Waterloo</p>
                    <ul class="list-unstyled">
                        <li><i class="fa fa-phone fa-fw"></i> (250) 893-0086</li>
                        <li><i class="fa fa-envelope-o fa-fw"></i>  <a href="mailto:joejacky@gmail.com">joejacky@gmail.com</a>
                        </li>
                    </ul>
					<!--
                    <br>
                    <ul class="list-inline">
                        <li>
                            <a href="#"><i class="fa fa-facebook fa-fw fa-3x"></i></a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-twitter fa-fw fa-3x"></i></a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-dribbble fa-fw fa-3x"></i></a>
                        </li>
                    </ul>
					-->
                    <hr class="small">
                    <p class="text-muted">Copyright &copy; Jacky Han 2014</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="../js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../js/bootstrap.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script>
    // Closes the sidebar menu
    $("#menu-close").click(function(e) {
        e.preventDefault();
        $("#sidebar-wrapper").toggleClass("active");
    });

    // Opens the sidebar menu
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#sidebar-wrapper").toggleClass("active");
    });

    // Scrolls to the selected menu item on the page
    $(function() {
        $('a[href*=#]:not([href=#])').click(function() {
            if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') || location.hostname == this.hostname) {

                var target = $(this.hash);
                target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
                if (target.length) {
                    $('html,body').animate({
                        scrollTop: target.offset().top
                    }, 1000);
                    return false;
                }
            }
        });
    });

    $("#change1").click(function(e) {
        e.preventDefault();
        $("#final").attr("src","../img/path-final-aa.png");
    });
    $("#change2").click(function(e) {
        e.preventDefault();
        $("#final").attr("src","../img/path-final-1.png");
    });
    $("#change3").click(function(e) {
        e.preventDefault();
        $("#final").attr("src","../img/ray-final-1.png");
    });
    </script>

</body>

</html>
